<!--
  Generated template for the CarUsagePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title text-center>
      <!--<ion-item>-->
      ประวัติการใช้งาน
      <!--</ion-item> -->
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <ion-card>
    <ion-card-header>

    </ion-card-header>
    <ion-card-content>
      <ion-segment (ionChange)="clearData()" [(ngModel)]="groupTab" name="groupTab">
        <ion-segment-button value="monthly">รายเดือน</ion-segment-button>
        <ion-segment-button value="yearly">รายปี</ion-segment-button>
      </ion-segment>
      <ion-grid>
          <ion-row>
              <ion-col col-4>
                  <ion-item *ngIf="groupTab ==='monthly'">
                      <div  ion-text item-start>เลือกเดือน</div>
                      <ion-datetime  class="text-large" displayFormat="MM/YYYY" [(ngModel)]="date"></ion-datetime>
                      <button item-end ion-button default (click)="getByMonth()">ค้นหา</button>
                  </ion-item>
                  <ion-item *ngIf="groupTab ==='yearly'">
                      <div  ion-text item-start>เลือกปี</div>
                      <ion-datetime  class="text-large" (ionChange)="getByYear()" displayFormat="YYYY" [(ngModel)]="date"></ion-datetime>
                      <button item-end ion-button default (click)="getByYear()">ค้นหา</button>
                  </ion-item>
              </ion-col>
            </ion-row>
      </ion-grid>
      <ion-list no-padding inset>
        <ion-item no-padding class="table-header">
          <ion-label>ว/ด/ป</ion-label>
          <ion-label item-content>ระยะทาง
            <p ion-text color="dark">(ก.ม.)</p>
          </ion-label>
          <ion-label item-content>ราคาน้ำมัน
            <p ion-text color="dark">(บาท/ลิตร)</p>
          </ion-label>
          <ion-label item-content>เติมน้ำมัน
            <p ion-text color="dark">(ลิตร)</p>
          </ion-label>
          <ion-label item-content>เป็นเงิน
            <p ion-text color="dark">(บาท)</p>
          </ion-label>
          <ion-label item-content>ระยะทาง/ลิตร
            <p ion-text color="dark">(ก.ม./ลิตร)</p>
          </ion-label>
          <ion-label item-content>ค่าน้ำมัน/ระยะทาง
            <p ion-text color="dark">(บาท/ก.ม.)</p>
          </ion-label>
          <button disabled ion-button outline item-end>เพิ่มเติม</button>
        </ion-item>
        <!-- Details -->
        <ion-item no-padding *ngFor="let carUsage of carUsages">
          <ion-label>
            <ion-datetime no-padding disabled displayFormat="DD/MM/YYYY" [(ngModel)]="carUsage.date_arrival"></ion-datetime>
          </ion-label>
          <ion-label item-content>{{carUsage.distance}}</ion-label>
          <ion-label item-content>{{carUsage.gas_unit_price |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{carUsage.gas_fill |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{carUsage.gas_total_price |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{carUsage.distance_per_litre |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{carUsage.price_per_distance |number:'1.2-2'}}</ion-label>
          <button item-end ion-button (click)="moreDetails(carUsage,$event)">เพิ่มเติม</button>
        </ion-item>
        <!-- Result -->
        <ion-item color="success" no-padding>
          <ion-label>รวม</ion-label>
          <ion-label item-content>{{totalUsage?.distance}}</ion-label>
          <ion-label item-content>{{totalUsage?.gas_unit_price |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{totalUsage?.gas_fill |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{totalUsage?.gas_total_price |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{totalUsage?.distance_per_litre |number:'1.2-2'}}</ion-label>
          <ion-label item-content>{{totalUsage?.price_per_distance |number:'1.2-2'}}</ion-label>
          <button disabled ion-button outline item-end>เพิ่มเติม</button>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>