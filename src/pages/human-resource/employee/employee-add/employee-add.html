<!--
  Generated template for the EmployeeAddPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-item no-lines>
      <button (click)="dismiss()" item-start default ion-button color="danger">ปิด</button>
      <ion-title>เพิ่มพนักงาน</ion-title>
      <button [disabled]="!employeeForm.form.valid" (click)="addNewEmployee(employeeForm.value)" item-end default ion-button color="success">เพิ่มพนักงาน</button>
    </ion-item>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <ion-grid>
    <form #employeeForm="ngForm">
      <ion-row>
        <!-- EmID -->
        <ion-col col-6>
          <ion-item>
            <ion-label color="primary">รหัสพนักงาน</ion-label>
            <ion-input required text-right name="em_id" ngModel></ion-input>
          </ion-item>
        </ion-col>
        <!-- Salary Type-->
        <ion-col col-6>
          <ion-item>
            <ion-label color="primary">การจ่ายเงิน</ion-label>
            <ion-select required name="salary_type_id" ngModel>
              <ion-option value="1">รายเดือน</ion-option>
              <ion-option value="2">รายวัน</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <!-- name -->
        <ion-col col-6>
          <ion-item>
            <ion-label color="primary">ชื่อ</ion-label>
            <ion-input text-right required name="name" ngModel></ion-input>
          </ion-item>
        </ion-col>
        <!-- Lastname -->
        <ion-col col-6>
          <ion-item>
            <ion-label color="primary">นามสกุล</ion-label>
            <ion-input required text-right name="lastname" ngModel></ion-input>
          </ion-item>
        </ion-col>
        <!-- Rank -->
        <ion-col col-6>
          <ion-item>
            <ion-label>ตำแหน่ง</ion-label>
            <ion-select placeholder="เลือกตำแหน่ง" required name="rank_id" ngModel>
              <ion-option *ngFor="let rank of ranks" [value]="rank.id">{{rank.name}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <!--Division-->
        <ion-col col-6>
          <ion-item>
            <ion-label color="primary">ฝ่าย</ion-label>
            <ion-select (ionChange)="getDepartments(division_id)" placeholder="เลือกฝ่าย" required name="division_id" [(ngModel)]="division_id">
              <ion-option *ngFor="let division of divisions" [value]="division.id">{{division.name}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <!-- Department -->
        <ion-col col-6>
          <ion-item>
            <ion-label>แผนก</ion-label>
            <ion-select *ngIf="division_id" placeholder="เลือกแผนก" name="department_id" ngModel>
              <ion-option *ngFor="let department of departments" [value]="department.id">{{department.name}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
    </form>
  </ion-grid>
</ion-content>